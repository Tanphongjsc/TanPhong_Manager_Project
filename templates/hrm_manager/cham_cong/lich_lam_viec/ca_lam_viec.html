{% extends "base.html" %}
{% load static %}

{% block title %}Thiết kế Ca làm việc{% endblock %}

{% block content %}
<div class="flex flex-col h-full space-y-4">
    {# Breadcrumb #}
    {% include "components/breadcrumb.html" with breadcrumb_items=breadcrumbs %}

    <div class="bg-white shadow-sm p-1 sm:p-4 rounded-lg h-full flex flex-col">
        <h1 class="text-2xl font-bold text-slate-900 mb-4">Lịch làm việc</h1>
        
        {# Tabs #}
        {% include "components/tab_nav.html" with tabs=tabs %}

        <div class="flex-1 flex flex-col mt-2 relative"> {# TOOLBAR #}
            {% url 'hrm:cham_cong:thiet_ke_ca_create' as create_url_val %}
            {% include "components/toolbar.html" with search_id="search-ca" search_placeholder="Tìm kiếm theo tên & mã ca" create_text="Thêm ca" create_url=create_url_val|default:'#' filter_form_id="filter-ca" filter_options=filter_options filter_field="loaichamcong" filter_label="Loại ca" %}

            {# TABLE WRAPPER #}
            {# Quan trọng: show_checkbox=True để hiện cột check #}
            {# Quan trọng: select_all_id phải khớp với config trong JS #}
            {% with headers='<th class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase w-1/4">Tên ca làm việc</th><th class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase w-1/6">Mã ca</th><th class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase w-1/6">Loại ca</th><th class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase w-1/3">Khung giờ</th>' %}
                
                {% include "components/table_wrapper.html" with table_id="ca-table" tbody_id="table-body-ca" headers_html=headers show_checkbox=True select_all_id="select-all-ca" %}
            
            {% endwith %}

            {# PAGINATION #}
            {% include "components/pagination.html" %}

            {# === PHẦN BẠN ĐANG THIẾU ĐÂY === #}
            {# BULK ACTIONS (Thanh công cụ xóa nhiều) #}
            {# ID phải khớp với config trong JS: bulk-actions-ca #}
            {% include "components/bulk_actions.html" with show_delete=True id="bulk-actions-ca" %}
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/cham_cong/ca_lam_viec.js' %}"></script>
{% endblock %}