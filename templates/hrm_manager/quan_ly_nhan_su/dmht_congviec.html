{% extends "base.html" %}
{% load static %}

{% block title %}Danh mục công việc{% endblock %}

{% block content %}
<div class="flex flex-col h-full space-y-4">
    {% include "components/breadcrumb.html" with breadcrumb_items=breadcrumbs %}

    <div class="bg-white shadow-sm p-1 sm:p-2 h-full flex flex-col">
        <h1 class="text-2xl font-bold text-slate-900 mb-6">Danh mục công việc</h1>

        {# Toolbar #}
        {% include "components/toolbar.html" with search_id="search-input" search_placeholder="Tìm kiếm..." create_text="Thêm công việc" create_onclick="window.CongViecManager.openSidebar('create')" filter_form_id="filter-form" filter_options=status_list filter_field="status" filter_label="Tất cả trạng thái" %}  

        {# Table Wrapper #}
        {% with headers='<th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Tên công việc</th><th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Mã công việc</th><th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Loại</th><th scope="col" class="px-6 py-3 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Công thức</th>' %}
            {% include "components/table_wrapper.html" with table_id="congviec-table" tbody_id="table-body" headers_html=headers show_checkbox=True select_all_id="select-all-checkbox" %}
        {% endwith %}

        {# Pagination & Bulk Actions #}
        {% include "components/pagination.html" %}
        {% include "components/bulk_actions.html" with show_delete=True id="bulk-actions" %}
    </div>
</div>

{# Sidebar #}
{% include "components/crud_sidebar.html" with sidebar_id="cv-sidebar" overlay_id="cv-sidebar-overlay" form_id="congviec-form" form_fields_template="hrm_manager/quan_ly_nhan_su/partials/congviec_form.html" submit_text="Lưu thông tin" %}
{% endblock %}

{% block scripts %}
<script src="{% static 'js/quan_ly_nhan_su/dmht_congviec.js' %}"></script>
{% endblock %}
